{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Success","text","style","color","background","fontSize","borderStyle","borderRadius","padding","Error","FilterSearch","props","value","searchWord","onChange","searchEvent","PersonForm","onSubmit","addPerson","name","nameEvent","number","numberEvent","type","Persons","persons","deleteHandler","map","person","key","buttonClickHandler","Button","onClickEvent","onClick","Person","App","useState","setPersons","setname","setnumber","search","setSearch","successState","setSuccessState","errorState","setErrorState","useEffect","personService","initialPersons","updatePerson","personObject","find","includes","successStateSetter","catch","error","errorStateSetter","message","setTimeout","visiblePersons","length","filter","toUpperCase","event","target","preventDefault","window","confirm","concat","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5041ed41.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = newObject => {\n    const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default {getAll, create, remove, update}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Success = ({ text }) => {\n  const successStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: '20px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n  }\n  return (\n    <div style={successStyle}>\n      {text}\n    </div>\n  )\n}\n\nconst Error = ({ text }) => {\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: '20px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n  }\n  return (\n    <div style={errorStyle}>\n      {text}\n    </div>\n  )\n}\n\nconst FilterSearch = (props) => {\n  return (\n    <div>\n      filter shown with: <input\n        value={props.searchWord}\n        onChange={props.searchEvent}\n      />\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>\n        name: <input\n          value={props.name}\n          onChange={props.nameEvent}\n        />\n      </div>\n      <div>\n        number: <input\n          value={props.number}\n          onChange={props.numberEvent}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = ({ persons, deleteHandler }) => {\n  return (\n    <div>\n      {persons.map(person => <Person key={person.id} person={person} buttonClickHandler={() => deleteHandler(person)} />)}\n    </div>\n  )\n}\n\nconst Button = ({ text, onClickEvent }) => {\n  return (\n    <button onClick={onClickEvent}>\n      {text}\n    </button>\n  )\n}\n\nconst Person = (props) => {\n  return (\n    <div>\n      {props.person.name} {props.person.number} <Button text={\"delete\"} onClickEvent={props.buttonClickHandler} />\n    </div>\n  )\n}\n\nconst App = () => {\n  /* States */\n  const [persons, setPersons] = useState([])\n  const [name, setname] = useState('')\n  const [number, setnumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [successState, setSuccessState] = useState(<></>)\n  const [errorState, setErrorState] = useState(<></>)\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }, [])\n\n\n\n  /* Form event handler */\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = { name, number }\n    if (persons.map(person => person.name).includes(name)) {\n      if (window.confirm(`${personObject.name} is already added to phonebook, replace the old number with new one`)) {\n        updatePerson(personObject)\n      }\n    } else {\n      personService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response))\n          successStateSetter(`Added ${personObject.name}`)\n        }).catch( error => {\n          errorStateSetter(error.response.data.error)\n        })\n      setname('')\n      setnumber('')\n    }\n  }\n\n  const updatePerson = (personObject) => {\n    personObject.id = persons.find(person => name.includes(person.name)).id\n    personService\n      .update(personObject)\n      .then(response => {\n        setPersons(persons.map(person => person.id !== personObject.id ? person : personObject))\n        successStateSetter(`Modified ${personObject.name} number to ${personObject.number}`)\n      })\n      .catch(error => {\n        errorStateSetter(`Information of ${personObject.name} has already been removed from the server`)\n      })\n  }\n\n  const deletePerson = (deletedPerson) => {\n    if (window.confirm(`Delete ${deletedPerson.name} ?`)) {\n      personService\n        .remove(deletedPerson.id)\n        .then(response => {\n          setPersons(persons.filter(person => person.id !== deletedPerson.id))\n          successStateSetter(`Deleted ${deletedPerson.name}`)\n        })\n        .catch(error => {\n          errorStateSetter(`Information of ${deletedPerson.name} has already been removed from the server`)\n        })\n    }\n  }\n\n  const errorStateSetter = (message) => {\n    setErrorState(<Error text={message} />)\n    setTimeout(() => {\n      setErrorState(<></>)\n    }, 5000)\n  }\n\n  const successStateSetter = (message) => {\n    setSuccessState(<Success text={message} />)\n    setTimeout(() => {\n      setSuccessState(<></>)\n    }, 5000)\n  }\n\n  /* Change event handlers */\n\n  const personChange = (event) => {\n    setname(event.target.value)\n  }\n\n  const numberChange = (event) => {\n    setnumber(event.target.value)\n  }\n\n  const searchChange = (event) => {\n    setSearch(event.target.value)\n  }\n\n  const visiblePersons = search.length > 0\n    ? persons.filter(person => person.name.toUpperCase().includes(search.toUpperCase()))\n    : persons\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {successState}\n      {errorState}\n      <FilterSearch\n        searchWord={search}\n        searchEvent={searchChange}\n      />\n      <h2>Add New</h2>\n      <PersonForm\n        addPerson={addPerson}\n        name={name}\n        nameEvent={personChange}\n        number={number}\n        numberEvent={numberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={visiblePersons} deleteHandler={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}